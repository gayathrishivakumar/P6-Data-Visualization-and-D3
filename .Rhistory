df <- as.data.frame(t(attendance_df)[1:7,]) #Last row is just percent change
years <- row.names(df)[2:7] #Extract the years
years <- lapply(years, FUN = function(x) gsub("X", "", x)) #Remove X from Years
years <- as.character(years)
#df <- df[-1,] #delete first row
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V1)
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V2)
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V3)
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V4)
#Let's combine all 4 dataframes together
attendance_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
#Plot to see if there is a trend, before starting work on the D3 Visualization
library(ggplot2)
ggplot(aes(x=as.numeric(Year),y=as.numeric(Attendance)), data = attendance_df) +
geom_point() +
facet_wrap(~ League)
list.files(getwd())
revenue_df <- read.csv('Annual_Revenue_By_League.csv')
attendance_df <- as.data.frame(t(attendance_df)[1:7,]) #Last row is just percent change
attendance_df <- read.csv('Regular_Season_Attendance_M.csv')
attendance_df <- as.data.frame(t(attendance_df)[1:7,]) #Last row is just percent change
getwd(); setwd('./Project-5-Data-Visualization-and-D3')
getwd(); getwd()
revenue_df <- read.csv('Annual_Revenue_By_League.csv')
View(revenue_df)
revenue_df <- as.data.frame(t(revenue_df))
View(revenue_df)
revenue_df <- as.data.frame(t(revenue_df)[1:7,])
revenue_df <- read.csv('Annual_Revenue_By_League.csv')
revenue_df <- as.data.frame(t(revenue_df)[1:7,])
revenue_df
df <- as.data.frame(t(revenue_df)[1:7,])
revenue_df <- read.csv('Annual_Revenue_By_League.csv')
df <- as.data.frame(t(revenue_df)[1:7,])
years <- row.names(df)[2:7] #Extract the years
years
years <- lapply(years, FUN = function(x) gsub("X", "", x)) #Remove X from Years
years <- as.character(years)
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V1)
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V2)
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V3)
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V4)
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V1)
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V2)
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V3)
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V4)
#Let's combine all 4 dataframes together
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf)
View(revenue_df)
library(ggplot2)
ggplot(aes(x=as.numeric(Year),y=as.numeric(Revenue)), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
revenue_df
ggplot(aes(x=as.numeric(Year),y=as.numeric(Revenue)), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
revenue_df <- read.csv('Annual_Revenue_By_League.csv')
df <- as.data.frame(t(revenue_df)[1:7,])
years <- row.names(df)[2:7] #Extract the years
years <- lapply(years, FUN = function(x) gsub("X", "", x)) #Remove X from Years
years <- as.character(years)
years
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V1)
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V2)
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V3)
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V4)
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
revenue_df
ggplot(aes(x=as.numeric(Year),y=as.numeric(Revenue)), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
library(ggplot2)
ggplot(aes(x=as.numeric(Year),y=as.numeric(Revenue)), data = revenue_df) +
geom_line() +
facet_wrap(~ League)
ggplot(aes(x=as.factor(Year),y=as.numeric(Revenue)), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
df
ggplot(aes(x=as.numeric(Year),y=as.numeric(Revenue)), data = revenue_df) +
geom_point()
ggplot(aes(x=as.numeric(Year),y=as.numeric(Revenue)), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
revenue_df
plot(revenue_df$Year,revenue_df$Revenue)
ggplot(aes(x=as.numeric(Year),y=Revenue), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
revenue_df <- read.csv('Annual_Revenue_By_League.csv')
df <- as.data.frame(t(revenue_df)[1:7,])
years <- row.names(df)[2:7] #Extract the years
years <- lapply(years, FUN = function(x) gsub("X", "", x)) #Remove X from Years
years <- as.character(years)
#Create 4 separate dataframes
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = as.numeric(V1))
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = as.numeric(V2))
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = as.numeric(V3))
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = as.numeric(V4))
#Let's combine all 4 dataframes together
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
#Revenue is in millions
#Plot to see if there is a trend, before starting work on the D3 Visualization
library(ggplot2)
ggplot(aes(x=as.numeric(Year),y=Revenue), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
revenue_df <- read.csv('Annual_Revenue_By_League.csv')
df <- as.data.frame(t(revenue_df)[1:7,])
years <- row.names(df)[2:7] #Extract the years
years <- lapply(years, FUN = function(x) gsub("X", "", x)) #Remove X from Years
years <- as.character(years)
#Create 4 separate dataframes
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V1)
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V2)
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V3)
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V4)
#Let's combine all 4 dataframes together
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
#Revenue is in millions
revenue_df
revenue_df$Revenue <- as.numeric(sub("$","", revenue_df$Revenue))
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
revenue_df$Revenue <- as.numeric(gsub("$","", revenue_df$Revenue))
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
revenue_df$Revenue <- as.numeric(gsub("\\$","", revenue_df$Revenue))
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
revenue_df$Revenue
revenue_df$Revenue <- as.numeric(gsub("\\$","", as.character(revenue_df$Revenue)))
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
revenue_df$Revenue <- as.numeric(gsub("$","", as.character(revenue_df$Revenue)))
as.character(revenue_df$Revenue)
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
revenue_df$Revenue
revenue_df$Revenue <- as.character(revenue_df$Revenue)
revenue_df$Revenue
revenue_df$Revenue <- lapply(revenue_df$Revenue, FUN = function(x) gsub("$", "", x))
revenue_df$Revenue
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
revenue_df$Revenue <- as.character(revenue_df$Revenue)
revenue_df$Revenue <- lapply(revenue_df$Revenue, FUN = function(x) gsub("\\$", "", x))
revenue_df$Revenue <- as.numeric(revenue_df$Revenue)
revenue_df$Revenue
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
revenue_df$Revenue <- as.character(revenue_df$Revenue)
revenue_df$Revenue <- lapply(revenue_df$Revenue, FUN = function(x) gsub("\\$", "", x))
revenue_df$Revenue <- revenue_df$Revenue *1000000
revenue_df$Revenue <- as.numeric(revenue_df$Revenue) *1000000
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
revenue_df$Revenue <- as.character(revenue_df$Revenue)
revenue_df$Revenue <- lapply(revenue_df$Revenue, FUN = function(x) gsub("\\$", "", x))
revenue_df$Revenue <- lapply(revenue_df$Revenue, FUN = function(x) gsub(",", "", x))
revenue_df$Revenue
revenue_df$Revenue <- as.numeric(revenue_df$Revenue)
library(ggplot2)
ggplot(aes(x=as.numeric(Year),y=Revenue), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
rm(list=ls()
rm(list=ls()
rm(list=ls()
rm(list=ls())
#Goal - Create two tables in CSV format
#1st Table - Yearly Revenue per League
#2nd Table - Yearly Attendence per League
#Set working directory
getwd(); setwd('./Project-5-Data-Visualization-and-D3')
##Import Data
list.files(getwd())
attendance_df <- read.csv('Regular_Season_Attendance_M.csv')
##Clean Data
library(dplyr)
#Transpose
df <- as.data.frame(t(attendance_df)[1:7,]) #Last row is just percent change
years <- row.names(df)[2:7] #Extract the years
years <- lapply(years, FUN = function(x) gsub("X", "", x)) #Remove X from Years
years <- as.character(years)
#Create 4 separate dataframes
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V1)
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V2)
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V3)
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V4)
#Let's combine all 4 dataframes together
attendance_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
#Plot to see if there is a trend, before starting work on the D3 Visualization
library(ggplot2)
ggplot(aes(x=as.numeric(Year),y=as.numeric(Attendance)), data = attendance_df) +
geom_point() +
facet_wrap(~ League)
#Can see the less profitable leagues such as NBA, MLB, and NHL actual have higher
#attendance as opposed to the NFL which is the world's most profitable league at
#an overall profit of $984.5 million in 2005. This suggests that the lionshare of
#their profits come from non-ticket sales.
#http://ca.askmen.com/sports/business_200/218b_sports_business.html
#Write to csv file
write.csv(attendance_csv,'attendance.csv')
#Repeat Steps for Revenue Data
revenue_df <- read.csv('Annual_Revenue_By_League.csv')
df <- as.data.frame(t(revenue_df)[1:7,])
years <- row.names(df)[2:7] #Extract the years
years <- lapply(years, FUN = function(x) gsub("X", "", x)) #Remove X from Years
years <- as.character(years)
#Create 4 separate dataframes
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V1)
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V2)
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V3)
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V4)
#Let's combine all 4 dataframes together
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
#Revenue is in millions
#Convert to numeric
revenue_df$Revenue <- as.character(revenue_df$Revenue)
#Remove '$' and ','
revenue_df$Revenue <- lapply(revenue_df$Revenue, FUN = function(x) gsub("\\$", "", x))
revenue_df$Revenue <- lapply(revenue_df$Revenue, FUN = function(x) gsub(",", "", x))
revenue_df$Revenue <- as.numeric(revenue_df$Revenue)
as.numeric(gsub("$","", as.character(revenue_df$Revenue)))
#Plot to see if there is a trend, before starting work on the D3 Visualization
library(ggplot2)
ggplot(aes(x=as.numeric(Year),y=Revenue), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
plot(revenue_df$Year,revenue_df$Revenue)
#Write to csv file
write.csv(revenue_csv,'revenue.csv')
#Visualization Idea
#Show a "pie-chart" like distribution for both tables
#The pie in this case will be the map of Canada and USA
write.csv(revenue_df,'revenue.csv')
rm(list=ls())
#Goal - Create two tables in CSV format
#1st Table - Yearly Revenue per League
#2nd Table - Yearly Attendence per League
#Set working directory
getwd(); setwd('./Project-5-Data-Visualization-and-D3')
##Import Data
list.files(getwd())
attendance_df <- read.csv('Regular_Season_Attendance_M.csv')
##Clean Data
library(dplyr)
#Transpose
df <- as.data.frame(t(attendance_df)[1:7,]) #Last row is just percent change
years <- row.names(df)[2:7] #Extract the years
years <- lapply(years, FUN = function(x) gsub("X", "", x)) #Remove X from Years
years <- as.character(years)
#Create 4 separate dataframes
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V1)
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V2)
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V3)
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V4)
#Let's combine all 4 dataframes together
attendance_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
#Plot to see if there is a trend, before starting work on the D3 Visualization
library(ggplot2)
ggplot(aes(x=as.numeric(Year),y=as.numeric(Attendance)), data = attendance_df) +
geom_point() +
facet_wrap(~ League)
#Can see the less profitable leagues such as NBA, MLB, and NHL actual have higher
#attendance as opposed to the NFL which is the world's most profitable league at
#an overall profit of $984.5 million in 2005. This suggests that the lionshare of
#their profits come from non-ticket sales.
#http://ca.askmen.com/sports/business_200/218b_sports_business.html
#Write to csv file
write.csv(attendance_df,'attendance.csv',row.names=FALSE)
#Repeat Steps for Revenue Data
revenue_df <- read.csv('Annual_Revenue_By_League.csv')
df <- as.data.frame(t(revenue_df)[1:7,])
years <- row.names(df)[2:7] #Extract the years
years <- lapply(years, FUN = function(x) gsub("X", "", x)) #Remove X from Years
years <- as.character(years)
#Create 4 separate dataframes
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V1)
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V2)
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V3)
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V4)
#Let's combine all 4 dataframes together
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
#Revenue is in millions
#Convert to numeric
revenue_df$Revenue <- as.character(revenue_df$Revenue)
#Remove '$' and ','
revenue_df$Revenue <- lapply(revenue_df$Revenue, FUN = function(x) gsub("\\$", "", x))
revenue_df$Revenue <- lapply(revenue_df$Revenue, FUN = function(x) gsub(",", "", x))
revenue_df$Revenue <- as.numeric(revenue_df$Revenue)
as.numeric(gsub("$","", as.character(revenue_df$Revenue)))
#Plot to see if there is a trend, before starting work on the D3 Visualization
library(ggplot2)
ggplot(aes(x=as.numeric(Year),y=Revenue), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
plot(revenue_df$Year,revenue_df$Revenue)
#Write to csv file
write.csv(revenue_df,'revenue.csv', row.names=FALSE)
#Visualization Idea
#Show a "pie-chart" like distribution for both tables
#The pie in this case will be the map of Canada and USA
rm(list=ls())
#Goal - Create two tables in CSV format
#1st Table - Yearly Revenue per League
#2nd Table - Yearly Attendence per League
#Set working directory
getwd(); setwd('./Project-5-Data-Visualization-and-D3')
##Import Data
list.files(getwd())
attendance_df <- read.csv('Regular_Season_Attendance_M.csv')
##Clean Data
library(dplyr)
#Transpose
df <- as.data.frame(t(attendance_df)[1:7,]) #Last row is just percent change
years <- row.names(df)[2:7] #Extract the years
years <- lapply(years, FUN = function(x) gsub("X", "", x)) #Remove X from Years
years <- as.character(years)
#Create 4 separate dataframes
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V1)
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V2)
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V3)
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Attendance = V4)
#Let's combine all 4 dataframes together
attendance_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
#Plot to see if there is a trend, before starting work on the D3 Visualization
library(ggplot2)
ggplot(aes(x=as.numeric(Year),y=as.numeric(Attendance)), data = attendance_df) +
geom_point() +
facet_wrap(~ League)
#Can see the less profitable leagues such as NBA, MLB, and NHL actual have higher
#attendance as opposed to the NFL which is the world's most profitable league at
#an overall profit of $984.5 million in 2005. This suggests that the lionshare of
#their profits come from non-ticket sales.
#http://ca.askmen.com/sports/business_200/218b_sports_business.html
#Write to csv file
write.csv(attendance_df,'attendance.csv',row.names=FALSE)
#Repeat Steps for Revenue Data
revenue_df <- read.csv('Annual_Revenue_By_League.csv')
df <- as.data.frame(t(revenue_df)[1:7,])
years <- row.names(df)[2:7] #Extract the years
years <- lapply(years, FUN = function(x) gsub("X", "", x)) #Remove X from Years
years <- as.character(years)
#Create 4 separate dataframes
NFLdf <- df %>%
filter(V1 != "NFL ") %>%
mutate(Year = years, League = rep(c("NFL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V1)
MLBdf <- df %>%
filter(V2 != "MLB ") %>%
mutate(Year = years, League = rep(c("MLB"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V2)
NBAdf <- df %>%
filter(V3 != "NBA ") %>%
mutate(Year = years, League = rep(c("NBA"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V3)
NHLdf <- df %>%
filter(V4 != "NHL ") %>%
mutate(Year = years, League = rep(c("NHL"), each = nrow(df)-1)) %>%
select(Year, League, Revenue = V4)
#Let's combine all 4 dataframes together
revenue_df <- rbind(NFLdf,MLBdf,NBAdf,NHLdf) #currently arranged by league
#Revenue is in millions
#Convert to numeric
revenue_df$Revenue <- as.character(revenue_df$Revenue)
#Remove '$' and ','
revenue_df$Revenue <- lapply(revenue_df$Revenue, FUN = function(x) gsub("\\$", "", x))
revenue_df$Revenue <- lapply(revenue_df$Revenue, FUN = function(x) gsub(",", "", x))
revenue_df$Revenue <- as.numeric(revenue_df$Revenue)
as.numeric(gsub("$","", as.character(revenue_df$Revenue)))
#Plot to see if there is a trend, before starting work on the D3 Visualization
library(ggplot2)
ggplot(aes(x=as.numeric(Year),y=Revenue), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
plot(revenue_df$Year,revenue_df$Revenue)
#Write to csv file
write.csv(revenue_df,'revenue.csv', row.names=FALSE)
#Visualization Idea
#Show a "pie-chart" like distribution for both tables
#The pie in this case will be the map of Canada and USA
ggplot(aes(x=as.numeric(Year),y=Revenue), data = revenue_df) +
geom_point() +
facet_wrap(~ League)
